(()=>{"use strict";var e={554:(e,t,n)=>{n.r(t)},456:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},102:(e,t,n)=>{n.r(t)},387:(e,t,n)=>{n.r(t)},877:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageController=void 0;const r=n(256),i=n(637),s=n(253),o=a(n(49));t.GarageController=class{constructor(){this.createInput=new s.CreateInputElement,this.updateInput=new s.CreateInputElement,this.createButtonElement=new i.CreateButtonElement("Create").getElement(),this.updateButtonElement=new i.CreateButtonElement("Update").getElement(),this.raceStartButtonElement=new i.CreateButtonElement("Race").getElement(),this.raceResetButtonElement=new i.CreateButtonElement("Reset").getElement(),this.generateCarButtonElement=new i.CreateButtonElement("New Cars").getElement(),this.createColorPicker=new r.ColorPicker,this.updateColorPicker=new r.ColorPicker,this.updateSelectCarId=null,this.updateSelectCarName=null,this.createInputElement=this.createInput.getElement(),this.updateInputElement=this.updateInput.getElement(),this.createColorPickerElement=this.createColorPicker.getElement(),this.updateColorPickerElement=this.updateColorPicker.getElement(),this.disableUpdateInput()}getControllerHtml(){const e=(0,o.default)({tag:"section",classNames:["controller"],text:""}),t=(0,o.default)({tag:"div",classNames:["controller__block","block-create"],text:""});t.append(this.createInputElement,this.createColorPickerElement,this.createButtonElement);const n=(0,o.default)({tag:"div",classNames:["controller__block","block-update"],text:""});this.updateButtonElement.disabled=!0,this.updateInputElement.disabled=!0,n.append(this.updateInputElement,this.updateColorPickerElement,this.updateButtonElement);const a=(0,o.default)({tag:"div",classNames:["controller__block","block-race"],text:""});return this.raceResetButtonElement.disabled=!0,a.append(this.raceStartButtonElement,this.raceResetButtonElement,this.generateCarButtonElement),e.append(t,n,a),e}disableUpdateInput(){this.updateInputElement.disabled=!0}enableUpdateInput(){this.updateInputElement.disabled=!1,this.updateInputElement.focus()}disableCreateInput(){this.createInputElement.disabled=!0}enableCreateInput(){this.createInputElement.disabled=!1}disableRaceStartButton(){this.raceStartButtonElement.disabled=!0}enableRaceStartButton(){this.raceStartButtonElement.disabled=!1}getCreateCarValues(){return{textValue:this.createInput.getInputValue(),colorValue:this.createColorPicker.getInputValue()}}getUpdateCarValues(){return{textValue:this.updateInput.getInputValue(),colorValue:this.updateColorPicker.getInputValue()}}getCreateButton(){return this.createButtonElement}getRaceStartButton(){return this.raceStartButtonElement}getRaceResetButton(){return this.raceResetButtonElement}getUpdateCarButton(){return this.updateButtonElement}getGenerateCarButton(){return this.generateCarButtonElement}setCreateInputFailedState(){this.createInput.setFailedState()}setUpdateInputFailedState(){this.updateInput.setFailedState()}clearCreateInputValues(){this.createColorPicker.clearInputValue(),this.createInput.clearInputValue()}clearUpdateInputValues(){this.updateColorPicker.clearInputValue(),this.updateInput.clearInputValue()}disableControllerButtons(){this.raceStartButtonElement.disabled=!0,this.raceResetButtonElement.disabled=!0,this.generateCarButtonElement.disabled=!0,this.createButtonElement.disabled=!0}enableControllerButtons(){this.raceStartButtonElement.disabled=!1,this.generateCarButtonElement.disabled=!1,this.createButtonElement.disabled=!1,this.updateButtonElement.disabled=!0}setUpdateInputValue(e,t){this.updateInput.setInputValue(e),this.updateColorPicker.setColorPickerValue(t)}setUpdateSelectCarId(e){this.updateSelectCarId=e}getUpdateSelectCarId(){if(!this.updateSelectCarId)throw new Error("Update car Id is not defined");return this.updateSelectCarId}setUpdateSelectCarName(e){this.updateSelectCarName=e}}},808:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PageController=void 0;const r=n(637),i=a(n(49));t.PageController=class{constructor(){this.toGarageButtonElement=new r.CreateButtonElement("Garage").getElement(),this.toWinnersButtonElement=new r.CreateButtonElement("Winners").getElement()}getPageControllerHTML(){const e=(0,i.default)({tag:"div",classNames:["header__page-controller","page-controller"],text:""});return e.append(this.toGarageButtonElement,this.toWinnersButtonElement),e}getGarageButton(){return this.toGarageButtonElement}getWinnersButton(){return this.toWinnersButtonElement}}},314:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncRace=void 0;const r=a(n(977));n(387);const i=a(n(49)),s=n(808),o=n(158),l=n(413);t.AsyncRace=class{constructor(){this.body=document.body,this.garageCurrentPage=1,this.garage=new o.Garage(this.garageCurrentPage),this.winnersCurrentPage=1,this.garageElement=this.garage.getGarageHtml(),this.pageController=new s.PageController,this.pageControllerElement=this.pageController.getPageControllerHTML(),this.toGarageButton=this.pageController.getGarageButton(),this.toWinnersButton=this.pageController.getWinnersButton(),this.winnersHTML=null,this.main=(0,i.default)({tag:"main",classNames:["main","_container"],text:""}),this.getHtmlPAge(),this.addEventListeners()}addEventListeners(){this.toWinnersButton.addEventListener("click",(()=>{this.main.innerHTML="",this.garageCurrentPage=this.garage.getGarageCurrentPage(),this.winnersHTML=new l.WinnersTable(this.winnersCurrentPage,this.setWinnersState.bind(this)).getWinnersHtml(),this.main.append(this.winnersHTML)})),this.toGarageButton.addEventListener("click",(()=>{this.main.innerHTML="",this.main.append(this.garageElement)}))}setWinnersState(e){this.winnersCurrentPage=e}getHtmlPAge(){const e=(0,r.default)();e.append(this.pageControllerElement),this.main.append(this.garageElement),this.body.append(e),this.body.append(this.main)}}},558:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EquipmentCar=void 0;const i=n(637),s=r(n(49));n(554);const o=n(705),l=n(38),c=n(210),d=n(135);t.EquipmentCar=class{constructor({carColor:e,carName:t,id:n,garageController:a,deleteCarsCallback:r,selectCarCallback:d}){this.startCarButton=new i.CreateButtonElement("Start").getElement(),this.returnCarButton=new i.CreateButtonElement("Return").getElement(),this.selectCarButton=new i.CreateButtonElement("Select").getElement(),this.removeCarButton=new i.CreateButtonElement("Remove").getElement(),this.carGarageService=new l.GarageService,this.winnerService=new c.WinnersService,this.equipmentCar=(0,s.default)({tag:"div",classNames:["car-filed"],text:""}),this.carFieldId=`carField-${n}`,this.carName=t,this.carColor=e,this.equipmentCar.id=this.carFieldId,this.deleteCarsCallback=r,this.selectCarCallback=d,this.car=new o.Car(this.carColor,n,t),this.carElement=this.car.getCar(),this.carNameElement=(0,s.default)({tag:"span",classNames:["car-filed__name"],text:"Tesla"}),this.garageController=a,this.configureElement(),this.setCarName(t),this.setCarId(n),this.addEventsHandler()}configureElement(){const e=(0,s.default)({tag:"div",classNames:["car-filed__controller","controller"],text:""}),t=(0,s.default)({tag:"div",classNames:["controller-state"],text:""}),n=(0,s.default)({tag:"div",classNames:["controller-move"],text:""});t.append(this.selectCarButton,this.removeCarButton,this.carNameElement),n.append(this.startCarButton,this.returnCarButton),this.returnCarButton.disabled=!0,e.append(t,n);const a=(0,s.default)({tag:"div",classNames:["car-filed_road"],text:""}),r=(0,s.default)({tag:"img",classNames:["car-filed__flag"],text:""});r instanceof HTMLImageElement&&(r.src=d),a.append(this.carElement,r),this.equipmentCar.append(e,a)}addEventsHandler(){this.startCarButton.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){yield this.startSingleMoveCar()})))),this.returnCarButton.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){yield this.stopRaceMoveCar(),this.car.setToStartPosition(),this.enableAllButtons(),this.garageController.enableControllerButtons(),this.returnCarButton.disabled=!0,this.garageController.enableCreateInput()})))),this.selectCarButton.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.setSelectedState(),this.selectCarCallback(),this.garageController.enableUpdateInput();const e=this.garageController.getUpdateCarButton();this.garageController.setUpdateInputValue(this.carName,this.carColor),e.disabled=!1,this.garageController.disableControllerButtons(),this.garageController.setUpdateSelectCarId(this.car.getCarId()),this.garageController.setUpdateSelectCarName(this.carName),this.garageController.disableCreateInput()})))),this.removeCarButton.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){const e=this.car.getCarId();try{yield this.winnerService.getWinner(e),yield this.winnerService.deleteWinner(e),yield this.carGarageService.deleteCar(e)}catch(t){yield this.carGarageService.deleteCar(e)}this.garageController.enableControllerButtons(),yield this.deleteCarsCallback(),this.garageController.clearUpdateInputValues(),this.garageController.disableUpdateInput(),this.garageController.enableCreateInput(),0===(yield this.carGarageService.getCountCars())&&this.garageController.disableRaceStartButton()}))))}setSelectedState(){this.equipmentCar.classList.add("car-filed__active")}deleteSelectedState(){this.equipmentCar.classList.remove("car-filed__active")}disableAllButtons(){this.selectCarButton.disabled=!0,this.removeCarButton.disabled=!0,this.startCarButton.disabled=!0}enableAllButtons(){this.selectCarButton.disabled=!1,this.removeCarButton.disabled=!1,this.startCarButton.disabled=!1}startRaceMoveCar(){return a(this,void 0,void 0,(function*(){return yield this.car.startMove()}))}stopRaceMoveCar(){return a(this,void 0,void 0,(function*(){yield this.car.stopMove()}))}startSingleMoveCar(){return a(this,void 0,void 0,(function*(){return this.garageController.disableControllerButtons(),this.garageController.disableCreateInput(),this.disableAllButtons(),this.returnCarButton.disabled=!1,yield this.car.startMove()}))}setCarName(e){this.carNameElement.textContent=e,this.carName=e}setCarId(e){this.carElement.id=`${e}`}getCar(){return this.equipmentCar}getCarId(){return this.car.getCarId()}setCarColor(e){this.car.setCarColor(e),this.carColor=e}setCarToInitialPlace(){this.car.setToStartPosition()}disableSelectButton(){this.selectCarButton.disabled=!0}enableSelectButton(){this.selectCarButton.disabled=!1}}},705:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Car=void 0;const i=n(578),s=r(n(49)),o=n(933),l=n(542);t.Car=class{constructor(e,t,n){this.carEngine=new i.EngineService,this.carAnimationId=0,this.MILI_SECONDS_NUMBER=1e3,this.carId=t,this.carName=n,this.carElement=(0,s.default)({tag:"div",classNames:["car"],text:""}),this.configureElement(e)}configureElement(e){const t=(0,o.getCarImage)(e);this.carElement.innerHTML=t}animate(e){const t=(new Date).getTime(),n=(0,l.getEndpoint)(),a=()=>{const r=(new Date).getTime(),i=Math.min((r-t)/this.MILI_SECONDS_NUMBER);this.carElement.style.transform=`translateX(${i*n/e}%)`,i<=e&&(this.carAnimationId=requestAnimationFrame(a))};this.carAnimationId=requestAnimationFrame(a)}startMove(){return a(this,void 0,void 0,(function*(){try{const e=yield this.carEngine.startEngine(this.carId),t=+e.velocity,n=+e.distance/t/this.MILI_SECONDS_NUMBER;return this.animate(n),yield this.carEngine.driveEngine(this.carId),yield this.carEngine.stopEngine(this.carId),{roadTime:n,carName:this.carName,carId:this.carId}}catch(e){return yield this.stopMove()}}))}stopMove(){return a(this,void 0,void 0,(function*(){cancelAnimationFrame(this.carAnimationId),yield this.carEngine.stopEngine(this.carId)}))}setToStartPosition(){this.carElement.style.transform="translateX(0%)"}getCar(){return this.carElement}getCarId(){return this.carId}setCarColor(e){const t=(0,o.getCarImage)(e);this.carElement.innerHTML=t}}},933:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCarImage=void 0,t.getCarImage=function(e,t=140,n=50){return`<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n width="${t}px" height="${n}px" viewBox="0 0 1280.000000 640.000000"\n preserveAspectRatio="xMidYMid meet">\n<metadata>\nCreated by potrace 1.15, written by Peter Selinger 2001-2017\n</metadata>\n<g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)"\nfill="${e}" stroke="none">\n<path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6\n-10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91\n-250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340\n-49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3\n-150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418\n0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64\n-126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622\n756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302\n140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263\nl-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22\n259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239\n-63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1\n-116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45\n525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50\n680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0\n-226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332\n-208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341\n10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66\n-422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36\n-485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83\n54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12\n-67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134\n274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11\n-27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/>\n<path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262\n-467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493\n-551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23\n86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50\n-354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220\n1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360\n0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/>\n<path d="M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120\n-114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z"/>\n<path d="M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28\n22 c-34 28 -138 70 -193 79 l-40 7 0 -162z"/>\n<path d="M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0\n165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z"/>\n<path d="M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0\n165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z"/>\n<path d="M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29\n58 -13 0 -29 -8 -34 -18z"/>\n<path d="M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57\n9 153 -71 153 -27 0 -44 -8 -66 -29z"/>\n<path d="M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16\n-54 -2z"/>\n<path d="M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67\n-62 36z"/>\n<path d="M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123\n113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z"/>\n<path d="M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71\n195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z"/>\n<path d="M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25\n-70 0z"/>\n<path d="M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7\n0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/>\n<path d="M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223\n232 -230 231 -3 0 -11 -3 -17 -6z"/>\n<path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24\n-411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118\n380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86\n-407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96\n33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176\n238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207\n81 364 77 109 -3 143 -7 210 -30z"/>\n<path d="M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80\n119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z"/>\n<path d="M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20\n-163 84 -207 91 l-43 7 0 -162z"/>\n<path d="M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0\n165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z"/>\n<path d="M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45\n-88 241 -108 241 -4 0 -57 -51 -119 -112z"/>\n<path d="M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64\n-10 68 -14 2 -31 -3 -38 -10z"/>\n<path d="M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0\n-44 -6 -64 -31z"/>\n<path d="M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20\n-54 2z"/>\n<path d="M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13\n-24 13 -3 0 -14 -6 -24 -13z"/>\n<path d="M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120\n109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z"/>\n<path d="M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177\n79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z"/>\n<path d="M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43\n-67 12z"/>\n<path d="M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108\n10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115\n-113z"/>\n<path d="M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186\n61 239 98 16 10 -216 242 -234 235z"/>\n</g>\n</svg>`}},256:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ColorPicker=void 0;const r=a(n(49));n(456),t.ColorPicker=class{constructor(){this.colorHEX="",this.picker=(0,r.default)({tag:"input",classNames:["create-block__input__color-picker"],text:""}),this.configureElement(),this.addEventListeners()}configureElement(){this.picker.id="color-picker",this.picker.type="color",this.picker.insertAdjacentHTML("afterbegin",'\n        <input id="color-picker" type="color">\n    ')}addEventListeners(){this.picker.addEventListener("input",(()=>{this.colorHEX=this.picker.value}))}getInputValue(){return this.colorHEX||""}clearInputValue(){this.picker.value="#000000"}setColorPickerValue(e){this.picker.value=e,this.colorHEX=e}getElement(){return this.picker}}},637:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateButtonElement=void 0;const r=a(n(49));t.CreateButtonElement=class{constructor(e){this.element=(0,r.default)({tag:"button",classNames:["create-block__button"],text:e})}getElement(){return this.element}}},253:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreateInputElement=void 0;const r=a(n(49));t.CreateInputElement=class{constructor(){this.inputPlaceholder="Write name",this.element=(0,r.default)({tag:"input",classNames:["create-block__input"],text:""}),this.configureElement()}configureElement(){this.element.placeholder=this.inputPlaceholder}getInputValue(){return this.element.value}setInputValue(e){this.element.value=e}clearInputValue(){this.element.value=""}getElement(){return this.element}setFailedState(){this.element.classList.add("create-block__input__failed"),setTimeout((()=>{this.element.classList.remove("create-block__input__failed")}),500)}}},49:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function({tag:e,classNames:t,text:n}){const a=document.createElement(e);return a.classList.add(...t),a.textContent=n,a}},158:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Garage=void 0;const i=n(38),s=n(210),o=n(558),l=n(637),c=r(n(49)),d=n(877),u=n(592),h=n(63);t.Garage=class{constructor(e){this.garage=(0,c.default)({tag:"div",classNames:["garage"],text:""}),this.raceParty=[],this.carGarageApi=new i.GarageService,this.garageController=new d.GarageController,this.garageControllerElement=this.garageController.getControllerHtml(),this.createButtonElement=this.garageController.getCreateButton(),this.raceStartButtonElement=this.garageController.getRaceStartButton(),this.raceResetButtonElement=this.garageController.getRaceResetButton(),this.updateButtonElement=this.garageController.getUpdateCarButton(),this.generateCarsButtonElement=this.garageController.getGenerateCarButton(),this.garageCarsCount=(0,c.default)({tag:"span",classNames:["block-garage__count"],text:""}),this.garagePageNumber=(0,c.default)({tag:"span",classNames:["block-garage__pages"],text:"Page: 1"}),this.prevPageButtonElement=new l.CreateButtonElement("Prev").getElement(),this.nextPageButtonElement=new l.CreateButtonElement("Next").getElement(),this.winnerService=new s.WinnersService,this.popupMessage=null,this.DELTA_INDEX_NUMBER=1,this.GARAGE_PAGE_LIMIT=7,this.GARAGE_GENERATE_CARS_COUNT=100,this.EMPTY_WINNER_MESSAGE="Ooops :(\n        There is no winner...\n        ",this.garageCurrentPage=e,this.getCars(),this.addEventListeners()}getGarageHtml(){const e=(0,c.default)({tag:"section",classNames:["garage__block","block-garage"],text:""}),t=(0,c.default)({tag:"div",classNames:["block-garage__info"],text:""}),n=(0,c.default)({tag:"div",classNames:["block-garage__page-controller"],text:""});this.prevPageButtonElement.disabled=!0,this.nextPageButtonElement.disabled=!0,n.append(this.prevPageButtonElement,this.nextPageButtonElement);const a=(0,c.default)({tag:"div",classNames:["page-controller__wrapper"],text:""});a.append(n),t.append(this.garageCarsCount,this.garagePageNumber,a);const r=(0,c.default)({tag:"div",classNames:["block-garage__header"],text:""});return r.append(this.garageControllerElement,t),e.append(r,this.garage),e}addSingleCar(e){return a(this,void 0,void 0,(function*(){if((yield this.carGarageApi.getCars(this.garageCurrentPage)).length<=this.GARAGE_PAGE_LIMIT){const t={carColor:e.color,carName:e.name,id:e.id,garageController:this.garageController,deleteCarsCallback:this.getCars.bind(this),selectCarCallback:this.disableAllSelectButtons.bind(this)},n=new o.EquipmentCar(t),a=n.getCar();this.raceParty.push(n),this.garage.append(a)}}))}addEventListeners(){this.nextPageButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){1===this.garageCurrentPage&&(this.prevPageButtonElement.disabled=!1);const e=yield this.carGarageApi.getCountCars();this.garageCurrentPage+=this.DELTA_INDEX_NUMBER,yield this.getCars(this.garageCurrentPage),this.garageCurrentPage===Math.ceil(e/7)&&(this.nextPageButtonElement.disabled=!0)})))),this.prevPageButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){if(1!==this.garageCurrentPage){const e=yield this.carGarageApi.getCountCars();this.garageCurrentPage===Math.ceil(e/7)&&(this.nextPageButtonElement.disabled=!1),this.garageCurrentPage-=this.DELTA_INDEX_NUMBER,1===this.garageCurrentPage&&(this.prevPageButtonElement.disabled=!0),yield this.getCars(this.garageCurrentPage)}})))),this.createButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){const e=this.garageController.getCreateCarValues();if(""===e.textValue)return void this.garageController.setCreateInputFailedState();const t=yield this.carGarageApi.createCar(e.textValue,e.colorValue),n=yield this.carGarageApi.getCountCars();this.setGarageCarsCount(n),(n<=this.GARAGE_PAGE_LIMIT||this.raceParty.length<this.GARAGE_PAGE_LIMIT)&&(yield this.addSingleCar(t)),n>this.GARAGE_PAGE_LIMIT&&(this.nextPageButtonElement.disabled=!1),(yield this.carGarageApi.getCountCars())>0&&this.garageController.enableRaceStartButton(),this.garageController.clearCreateInputValues(),yield this.setGaragePageNumber(this.garageCurrentPage)})))),this.raceStartButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.garageController.disableControllerButtons(),this.garageController.disableCreateInput(),this.disablePageControllerButtons(),this.raceParty.forEach((e=>e.disableAllButtons()));const e=yield Promise.all(this.raceParty.map((e=>e.startRaceMoveCar())));this.raceResetButtonElement.disabled=!1;const t=e.reduce(((e,t)=>(0===e.length&&t&&e.push(t),t&&t.roadTime<e[0].roadTime&&e.splice(0,1,t),e)),[]);if(0!==t.length){const e=t[0];yield this.createWinner(e),this.showWinnerPopup(e.roadTime,e.carName)}else this.showWinnerPopup()})))),this.raceResetButtonElement.addEventListener("click",(()=>{this.raceParty.forEach((e=>e.setCarToInitialPlace())),this.raceParty.forEach((e=>e.enableAllButtons())),this.garageController.enableControllerButtons(),this.garageController.enableCreateInput(),this.raceResetButtonElement.disabled=!0,this.enablePageControllerButtons()})),this.updateButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){yield this.updateCar()})))),this.generateCarsButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){yield this.generateNewCars()}))))}compareWinnerResult(e,t,n){return{time:e<t?e:t,winsCount:n+this.DELTA_INDEX_NUMBER}}createWinner(e){return a(this,void 0,void 0,(function*(){const t=e.carId,n=e.roadTime;try{const n=yield this.winnerService.getWinner(t),a=this.compareWinnerResult(n.time,e.roadTime,n.wins);yield this.winnerService.updateWinner(t,a.winsCount,a.time)}catch(e){yield this.winnerService.createWinner(t,1,n)}}))}generateNewCars(){return a(this,void 0,void 0,(function*(){const e=[],t=yield this.carGarageApi.getCountCars();for(let t=0;t<this.GARAGE_GENERATE_CARS_COUNT;t+=this.DELTA_INDEX_NUMBER){const t=(0,u.getRandomCarName)(),n=(0,h.generateColor)();e.push({name:t,color:n})}e.forEach((e=>a(this,void 0,void 0,(function*(){yield this.carGarageApi.createCar(e.name,e.color)}))));const n=yield this.carGarageApi.getCountCars();this.setGarageCarsCount(n),t<this.GARAGE_PAGE_LIMIT&&(yield this.getCars())}))}disablePageControllerButtons(){this.prevPageButtonElement.disabled=!0,this.nextPageButtonElement.disabled=!0}enablePageControllerButtons(){return a(this,void 0,void 0,(function*(){const e=yield this.carGarageApi.getCountCars();1===this.garageCurrentPage?this.prevPageButtonElement.disabled=!0:this.prevPageButtonElement.disabled=!1,this.garageCurrentPage===Math.ceil(e/this.GARAGE_PAGE_LIMIT)?this.nextPageButtonElement.disabled=!0:this.nextPageButtonElement.disabled=!1}))}getCars(e=this.garageCurrentPage){return a(this,void 0,void 0,(function*(){const t=yield this.carGarageApi.getCountCars();yield this.setGaragePageNumber(e);const n=yield this.carGarageApi.getCars(e);this.raceParty.length=0,this.garage.innerHTML="",n.forEach((e=>{const t={carColor:e.color,carName:e.name,id:e.id,garageController:this.garageController,deleteCarsCallback:this.getCars.bind(this),selectCarCallback:this.disableAllSelectButtons.bind(this)},n=new o.EquipmentCar(t),a=n.getCar();this.raceParty.push(n),this.garage.append(a)})),t>this.GARAGE_PAGE_LIMIT&&1===this.garageCurrentPage&&(this.prevPageButtonElement.disabled=!0,this.nextPageButtonElement.disabled=!1),this.garageCurrentPage===Math.ceil(t/this.GARAGE_PAGE_LIMIT)+1&&0===this.raceParty.length&&(this.garageCurrentPage-=1,yield this.getCars()),this.setGarageCarsCount(t)}))}disableAllSelectButtons(){this.raceParty.forEach((e=>e.disableSelectButton()))}setGarageCarsCount(e){this.garageCarsCount.textContent=`Garage: (${e}) Cars`}updateCar(){return a(this,void 0,void 0,(function*(){const e=this.garageController.getUpdateSelectCarId(),t=this.garageController.getUpdateCarValues(),n=t.textValue,a=t.colorValue;""!==n?(yield this.carGarageApi.updateCar(e,n,a),this.raceParty.forEach((t=>{t.getCarId()===e&&(t.setCarName(n),t.setCarColor(a),t.deleteSelectedState())})),this.updateButtonElement.disabled=!0,this.createButtonElement.disabled=!1,this.raceStartButtonElement.disabled=!1,this.garageController.clearUpdateInputValues(),this.raceParty.forEach((e=>e.enableSelectButton())),this.garageController.disableUpdateInput(),this.garageController.enableCreateInput(),this.generateCarsButtonElement.disabled=!1):this.garageController.setUpdateInputFailedState()}))}getGarageCurrentPage(){return this.garageCurrentPage}showWinnerPopup(e,t){const n=(0,c.default)({tag:"div",classNames:["winner__popup","popup"],text:""}),a=(0,c.default)({tag:"span",classNames:["popup__message"],text:`The Winner is "${t}".\n            Time - ${null==e?void 0:e.toFixed(2)} sec.`}),r=(0,c.default)({tag:"button",classNames:["popup__button"],text:"x"});e||t||(a.textContent=this.EMPTY_WINNER_MESSAGE),r.addEventListener("click",(()=>{this.removeWinnerMessage()})),n.append(a,r),this.popupMessage=n,this.garage.append(n),this.raceResetButtonElement.disabled=!0}removeWinnerMessage(){this.popupMessage&&(this.popupMessage.remove(),this.raceResetButtonElement.disabled=!1)}setGaragePageNumber(e){return a(this,void 0,void 0,(function*(){const t=yield this.carGarageApi.getCountCars(),n=Math.ceil(t/this.GARAGE_PAGE_LIMIT);this.garagePageNumber.textContent=`Page: ${e}/${n}`}))}}},592:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomCarName=void 0;const n=["Audi","BMW","Ford","Hyundai","Kia","Lada","Mazda","Mersedes","Mitsubishi","Nissan","Renault","Skoda","Toyota","Volkswagen","Acura","Daihatsu","Datsun","Honda","Infiniti","Isuzu","Lexus","Scion","Subaru","Suzuki","Cadillac","Chevrolet","Chrysler","Dodge","GMC","Hummer","Jeep","Lincoln","Mercury","Oldsmobile","Pontiac","Tesla","ГАЗ","Москвич","ТагАЗ","УАЗ"],a=["Granta","Kalina","PRIORA","LARGUS","Kalina","Siber","A4 B5","A6 C7","Q7","80","100","X5 e70","Escalade","SRX 2","Aveo","Captiva","Cruze","Epica","Lacetti","NIVA","ORLANDO","C4","Caravan","Grand Caravan","Neon 2","Fiesta","Focus","Civic 5D","Matrix","Grand Cherokee WK2","Sportage 3","Lancer 10","Pajero 4","Patrol","Duster","Logan","Scenic 3","Octavia A7","Liana","Corolla E160"];function r(e,t){return Math.floor(Math.random()*(t-e)+e)}t.getRandomCarName=function(){const e=r(0,40),t=r(0,40);return`${n[e]} ${a[t]}`}},63:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateColor=void 0,t.generateColor=function(){return`#${(1048575*Math.random()*1e6).toString(16).slice(0,6)}`}},977:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(49));n(528),t.default=function(){const e=(0,r.default)({tag:"header",classNames:["header","_container"],text:""}),t=(0,r.default)({tag:"h1",classNames:["header__title"],text:"It's time to Async-Race!"});return e.append(t),e}},542:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getEndpoint=void 0,t.getEndpoint=function(){return window.innerWidth<=650?78:window.innerWidth<=600?76:87}},996:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersItem=void 0;const r=n(933),i=a(n(49));t.WinnersItem=class{constructor(e){this.winnersItem=(0,i.default)({tag:"tr",classNames:["winners__item","winner"],text:""}),this.winnerNumber=(0,i.default)({tag:"td",classNames:["winner__number"],text:`${e.indexNumber}`}),this.winnerCar=(0,i.default)({tag:"td",classNames:["winner__car"],text:""}),this.winnerName=(0,i.default)({tag:"td",classNames:["winner__name"],text:`${e.name}`}),this.winnerWins=(0,i.default)({tag:"td",classNames:["winner__wins"],text:`${e.wins}`}),this.winnerTime=(0,i.default)({tag:"td",classNames:["winner__time"],text:`${e.time}`}),this.winnersItem.append(this.winnerNumber,this.winnerCar,this.winnerName,this.winnerWins,this.winnerTime),this.configureWinner(e.color)}configureWinner(e){const t=(0,r.getCarImage)(e,60,40);this.winnerCar.innerHTML=t}getWinnerHtml(){return this.winnersItem}}},413:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersTable=void 0;const i=n(38),s=n(210),o=r(n(49)),l=n(996);n(102);const c=n(637);t.WinnersTable=class{constructor(e,t){this.winnersBlock=(0,o.default)({tag:"section",classNames:["winners-block"],text:""}),this.winnersTable=(0,o.default)({tag:"table",classNames:["winners__table"],text:""}),this.winnersTableBody=(0,o.default)({tag:"tbody",classNames:["winners__table-body"],text:""}),this.winnersTitle=(0,o.default)({tag:"span",classNames:["winners__title-text"],text:"Winners (1)"}),this.winnersTitlePage=(0,o.default)({tag:"span",classNames:["page-title__text"],text:"Page: 1"}),this.winnerWinsHeader=(0,o.default)({tag:"th",classNames:["table-header__wins"],text:"Wins"}),this.winnerTimeHeader=(0,o.default)({tag:"th",classNames:["table-header__time"],text:"Best time (sec)"}),this.winnersService=new s.WinnersService,this.garageService=new i.GarageService,this.prevPageButtonElement=new c.CreateButtonElement("Prev").getElement(),this.nextPageButtonElement=new c.CreateButtonElement("Next").getElement(),this.WINNERS_PAGE_LIMIT=10,this.DELTA_INDEX_NUMBER=1,this.winnersSortParam="time",this.winnersSortOrder="ASC",this.configureView(),this.setWinnersCurrentPage=t,this.winnersCurrentPage=e,this.addWinners({page:e,limit:this.WINNERS_PAGE_LIMIT,sort:this.winnersSortParam,order:this.winnersSortOrder}),this.addEventListeners()}configureView(){const e=(0,o.default)({tag:"div",classNames:["winners__info"],text:""});e.append(this.winnersTitle,this.winnersTitlePage);const t=(0,o.default)({tag:"thead",classNames:["winners__table-header","table-header"],text:""}),n=(0,o.default)({tag:"tr",classNames:["winners__table-header","table-header"],text:""});t.append(n);const a=(0,o.default)({tag:"th",classNames:["table-header__number"],text:"Number"}),r=(0,o.default)({tag:"th",classNames:["table-header__car"],text:"Car"}),i=(0,o.default)({tag:"th",classNames:["table-header__name"],text:"Name"});n.append(a,r,i,this.winnerWinsHeader,this.winnerTimeHeader),this.winnersTable.append(t,this.winnersTableBody);const s=(0,o.default)({tag:"div",classNames:["winners__page-controller"],text:""});s.append(this.prevPageButtonElement,this.nextPageButtonElement),this.winnersBlock.append(e,s,this.winnersTable)}getWinnersHtml(){return this.winnersBlock}disableControllerButtons(){return a(this,void 0,void 0,(function*(){const e=yield this.winnersService.getWinnersCount();1===this.winnersCurrentPage?this.prevPageButtonElement.disabled=!0:this.prevPageButtonElement.disabled=!1,this.winnersCurrentPage===Math.ceil(e/this.WINNERS_PAGE_LIMIT)?this.nextPageButtonElement.disabled=!0:this.nextPageButtonElement.disabled=!1}))}addWinners({page:e=this.winnersCurrentPage,limit:t=this.WINNERS_PAGE_LIMIT,sort:n=this.winnersSortParam,order:r=this.winnersSortOrder}){return a(this,void 0,void 0,(function*(){yield this.disableControllerButtons();const a=yield this.winnersService.getWinnersCount();yield this.setCurrentPageAndCount(a,this.winnersCurrentPage);const i=yield this.winnersService.getWinners({page:e,limit:t,sort:n,order:r}),s=i.map((e=>e.id)),o=yield Promise.all(s.map((e=>this.garageService.getCar(e)))),c=[];o.forEach(((e,t)=>{i.forEach((n=>{if(e.id===n.id){const a=this.winnersCurrentPage*this.WINNERS_PAGE_LIMIT-this.WINNERS_PAGE_LIMIT+t+this.DELTA_INDEX_NUMBER;c.push({wins:n.wins,time:n.time,color:e.color,indexNumber:a,name:e.name})}}))})),c.forEach((e=>{const t=new l.WinnersItem(e).getWinnerHtml();this.winnersTableBody.append(t)}))}))}setCurrentPageAndCount(e,t){return a(this,void 0,void 0,(function*(){const n=yield this.winnersService.getWinnersCount(),a=Math.ceil(n/this.WINNERS_PAGE_LIMIT);this.winnersTitle.textContent=`Winners (${e})`,this.winnersTitlePage.textContent=`Page: ${t}/${a}`}))}addEventListeners(){this.nextPageButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.winnersCurrentPage+=this.DELTA_INDEX_NUMBER,this.setWinnersCurrentPage(this.winnersCurrentPage),this.winnersTableBody.innerHTML="",yield this.addWinners({page:this.winnersCurrentPage,limit:this.WINNERS_PAGE_LIMIT,sort:this.winnersSortParam,order:this.winnersSortOrder})})))),this.prevPageButtonElement.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.winnersCurrentPage-=this.DELTA_INDEX_NUMBER,this.setWinnersCurrentPage(this.winnersCurrentPage),this.winnersTableBody.innerHTML="",yield this.addWinners({page:this.winnersCurrentPage,limit:this.WINNERS_PAGE_LIMIT,sort:this.winnersSortParam,order:this.winnersSortOrder})})))),this.winnerWinsHeader.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.winnersTableBody.innerHTML="",this.winnersSortParam="wins",this.winnersSortOrder="DESC",yield this.addWinners({page:this.winnersCurrentPage,limit:this.WINNERS_PAGE_LIMIT,sort:this.winnersSortParam,order:this.winnersSortOrder})})))),this.winnerTimeHeader.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.winnersTableBody.innerHTML="",this.winnersSortParam="time",this.winnersSortOrder="ACS",yield this.addWinners({page:this.winnersCurrentPage,limit:this.WINNERS_PAGE_LIMIT,sort:this.winnersSortParam,order:this.winnersSortOrder})}))))}}},578:function(e,t){var n=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EngineService=void 0,t.EngineService=class{constructor(){this.engineUrl="/engine"}startEngine(e){return n(this,void 0,void 0,(function*(){return(yield fetch(`http://127.0.0.1:3000${this.engineUrl}?id=${e}&status=started`,{method:"PATCH"})).json()}))}stopEngine(e){return n(this,void 0,void 0,(function*(){return(yield fetch(`http://127.0.0.1:3000${this.engineUrl}?id=${e}&status=stopped`,{method:"PATCH"})).json()}))}driveEngine(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`http://127.0.0.1:3000${this.engineUrl}?id=${e}&status=drive`,{method:"PATCH"});if(!t.ok)throw Error("Engine is break down");return t}))}}},38:function(e,t){var n=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GarageService=void 0,t.GarageService=class{constructor(){this.garageUrl="http://127.0.0.1:3000/garage/",this.API_URL="http://127.0.0.1:3000/garage/",this.DEFAULT_CAR_LIMIT=7}getCountCars(e=1,t=this.DEFAULT_CAR_LIMIT){return n(this,void 0,void 0,(function*(){const n=`_page=${e}&_limit=${t}`,a=yield fetch(`${this.API_URL}?${n}`);return Number(a.headers.get("X-Total-Count"))}))}getCars(e=1,t=this.DEFAULT_CAR_LIMIT){return n(this,void 0,void 0,(function*(){const n=`_page=${e}&_limit=${t}`;return(yield fetch(`${this.API_URL}?${n}`)).json()}))}getCar(e){return n(this,void 0,void 0,(function*(){const t=`${this.garageUrl}${e}`;return(yield fetch(t)).json()}))}createCar(e,t){return n(this,void 0,void 0,(function*(){return(yield fetch(this.garageUrl,{body:JSON.stringify({name:e,color:t}),headers:{"Content-Type":"application/json"},method:"POST"})).json()}))}deleteCar(e){return n(this,void 0,void 0,(function*(){const t=`${this.garageUrl}${e}`;return(yield fetch(t,{method:"DELETE"})).json()}))}updateCar(e,t,a){return n(this,void 0,void 0,(function*(){const n=`${this.garageUrl}${e}`;return(yield fetch(n,{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({name:t,color:a})})).json()}))}}},210:function(e,t){var n=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function o(e){try{l(a.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WinnersService=void 0,t.WinnersService=class{constructor(){this.WINNERS_URL="http://127.0.0.1:3000/winners",this.DEFAULT_WINNERS_LIMIT=10}getWinnersCount(e=1,t=this.DEFAULT_WINNERS_LIMIT){return n(this,void 0,void 0,(function*(){const n=`_page=${e}&_limit=${t}`,a=yield fetch(`${this.WINNERS_URL}?${n}`);return Number(a.headers.get("X-Total-Count"))}))}getWinners({page:e=1,limit:t=this.DEFAULT_WINNERS_LIMIT,sort:a="time",order:r="ASC"}){return n(this,void 0,void 0,(function*(){const n=`_page=${e}&_limit=${t}&_sort=${a}&_order=${r}`;return(yield fetch(`${this.WINNERS_URL}?${n}`)).json()}))}getWinner(e){return n(this,void 0,void 0,(function*(){const t=yield fetch(`${this.WINNERS_URL}/${e}`);if(!t.ok)throw Error("This machine has never been a winner");return t.json()}))}createWinner(e,t,a){return n(this,void 0,void 0,(function*(){return(yield fetch(this.WINNERS_URL,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:e,wins:t,time:a})})).json()}))}deleteWinner(e){return n(this,void 0,void 0,(function*(){return(yield fetch(`${this.WINNERS_URL}/${e}`,{method:"DELETE"})).json()}))}updateWinner(e,t,a){return n(this,void 0,void 0,(function*(){return(yield fetch(`${this.WINNERS_URL}/${e}`,{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify({wins:t,time:a})})).json()}))}}},135:(e,t,n)=>{e.exports=n.p+"assets/7fbff879a6e27a9fd9c3.svg"}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var r=a.length-1;r>-1&&!e;)e=a[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),new(n(314).AsyncRace)})();
//# sourceMappingURL=app.9189e6feec38610e4d49.js.map